<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-12-27">
<meta name="description" content="Assessing the impact of the World Cup on the Premier League">

<title>Ismail Mohammed - World Cup 2022 Fatigue</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-listing/list.min.js"></script>
<script src="../../site_libs/quarto-listing/quarto-listing.js"></script>
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script>

  window.document.addEventListener("DOMContentLoaded", function (_event) {
    const listingTargetEl = window.document.querySelector('#listing-listing .list');
    if (!listingTargetEl) {
      // No listing discovered, do not attach.
      return; 
    }

    const options = {
      valueNames: [{ data: ['index'] },{ data: ['categories'] },{ data: ['listing-date-sort'] },{ data: ['listing-file-modified-sort'] }],
      
      searchColumns: [],
    };

    window['quarto-listings'] = window['quarto-listings'] || {};
    window['quarto-listings']['listing-listing'] = new List('listing-listing', options);

    if (window['quarto-listing-loaded']) {
      window['quarto-listing-loaded']();
    }
  });

  window.addEventListener('hashchange',() => {
    if (window['quarto-listing-loaded']) {
      window['quarto-listing-loaded']();
    }
  })
  </script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-6GL9ZFETVN"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
 
  gtag('consent', 'default', {
    'ad_storage': 'denied',
    'analytics_storage': 'denied'
  });
gtag('config', 'G-6GL9ZFETVN', { 'anonymize_ip': true});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="Ismail Mohammed - World Cup 2022 Fatigue">
<meta property="og:description" content="Assessing the impact of the World Cup on the Premier League">
<meta property="og:image" content="https://github.com/ismailmo1/blog/posts/worldcup-fatigue/worldcup.png">
<meta property="og:site-name" content="Ismail Mohammed">
<meta property="og:image:height" content="1153">
<meta property="og:image:width" content="1833">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Ismail Mohammed</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/ismailmo1"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://linkedin.com/in/ismailmo-chem"><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">World Cup 2022 Fatigue</h1>
                  <div>
        <div class="description">
          Assessing the impact of the World Cup on the Premier League
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">python</div>
                <div class="quarto-category">pandas</div>
                <div class="quarto-category">matplotlib</div>
                <div class="quarto-category">data-viz</div>
                <div class="quarto-category">football</div>
                <div class="quarto-category">world cup</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">December 27, 2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#data-sources" id="toc-data-sources" class="nav-link active" data-scroll-target="#data-sources"><span class="toc-section-number">1</span>  Data Sources</a></li>
  <li><a href="#extracting-world-cup-data" id="toc-extracting-world-cup-data" class="nav-link" data-scroll-target="#extracting-world-cup-data"><span class="toc-section-number">2</span>  Extracting World Cup data</a></li>
  <li><a href="#data-processing" id="toc-data-processing" class="nav-link" data-scroll-target="#data-processing"><span class="toc-section-number">3</span>  Data processing</a>
  <ul class="collapse">
  <li><a href="#adding-country-name" id="toc-adding-country-name" class="nav-link" data-scroll-target="#adding-country-name"><span class="toc-section-number">3.1</span>  Adding country name</a></li>
  </ul></li>
  <li><a href="#visualisation" id="toc-visualisation" class="nav-link" data-scroll-target="#visualisation"><span class="toc-section-number">4</span>  Visualisation</a>
  <ul class="collapse">
  <li><a href="#grouping-by-country" id="toc-grouping-by-country" class="nav-link" data-scroll-target="#grouping-by-country"><span class="toc-section-number">4.1</span>  Grouping by country</a></li>
  <li><a href="#grouping-by-tournament-progression" id="toc-grouping-by-tournament-progression" class="nav-link" data-scroll-target="#grouping-by-tournament-progression"><span class="toc-section-number">4.2</span>  Grouping by tournament progression</a></li>
  <li><a href="#finishing-touches" id="toc-finishing-touches" class="nav-link" data-scroll-target="#finishing-touches"><span class="toc-section-number">4.3</span>  Finishing touches</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/quarto-dev/quarto-demo/edit/main/posts/worldcup-fatigue/index.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/quarto-dev/quarto-demo/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">




<p>The 2022 World Cup in Qatar was the first to be held during the winter months in the Premier League to avoid the intense heat of the Middle Eastern summer, so the Premier League season was put on hold accomodate for this. With only a week break between the end of the World Cup and the restart of the Premier League, it’s clear that some players and clubs will be impacted more than others, depending on how many games they played during the international tournament.</p>
<p>This post aims to explore the impact of the World Cup on the Premier League.</p>
<div class="column-screen">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./barh_plot.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">The final product</figcaption><p></p>
</figure>
</div>
</div>
<section id="data-sources" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Data Sources</h1>
<p>In a <a href="../../posts/CL19-strangers/avail-heatmaps.html">previous post</a> exploring the strange fact about the 2019 Champions League Final, <a href="https://www.transfermarkt.com">transfermarkt</a> was used as the data source by scraping webpages for players and teams. The same data source and libraries will be used here, but some changes are necessary to ensure we get the right level of granularity to ensure we canextract insights at the right level.</p>
<p>You can check out the transfermarkt scraping code <a href="https://www.github.com/ismailmo1/football-data-viz">here</a>.</p>
</section>
<section id="extracting-world-cup-data" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Extracting World Cup data</h1>
<p>The key data for this analysis lies within transfermarkt’s pages for the games played during the World Cup. Our previous scraping functionality was designed to only extract player availability so we’ll need to tweak some of the scraping code so we can get the minutes played for each game.</p>
<p>You can view the changes made in this <a href="https://github.com/ismailmo1/football-data-viz/commit/27f58d4597653919c64f6db6895bbf34279822f7">commit on github</a>.</p>
<p>Once we have a list of all matches played by a player, we need to extract the minutes played. Unfortunately the data for each player is on a seperate page, so to aggregate data for a club, we have to make a request for each one.</p>
<div class="cell" data-execution_count="1">
<details>
<summary>Scraping world cup minutes data</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="kw">def</span> get_world_cup_minutes(</span>
<span id="cb1-5"><a href="#cb1-5"></a>        team_url:<span class="bu">str</span>, </span>
<span id="cb1-6"><a href="#cb1-6"></a>        world_cup_start <span class="op">=</span> datetime(<span class="dv">2022</span>,<span class="dv">11</span>,<span class="dv">20</span>),</span>
<span id="cb1-7"><a href="#cb1-7"></a>        world_cup_end <span class="op">=</span> datetime(<span class="dv">2022</span>,<span class="dv">12</span>,<span class="dv">18</span>)</span>
<span id="cb1-8"><a href="#cb1-8"></a>    )<span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb1-9"><a href="#cb1-9"></a></span>
<span id="cb1-10"><a href="#cb1-10"></a>    team_players <span class="op">=</span> teams.get_players(team_url)</span>
<span id="cb1-11"><a href="#cb1-11"></a>    <span class="co"># build url of player to scrape data from</span></span>
<span id="cb1-12"><a href="#cb1-12"></a>    team_player_urls <span class="op">=</span> {player:<span class="st">"https://www.transfermarkt.com"</span> <span class="op">+</span> url <span class="cf">for</span> player,url <span class="kw">in</span> team_players.items()}</span>
<span id="cb1-13"><a href="#cb1-13"></a></span>
<span id="cb1-14"><a href="#cb1-14"></a>    <span class="co"># grab all player's matches</span></span>
<span id="cb1-15"><a href="#cb1-15"></a>    team_minutes_played <span class="op">=</span> []</span>
<span id="cb1-16"><a href="#cb1-16"></a>    </span>
<span id="cb1-17"><a href="#cb1-17"></a>    <span class="cf">for</span> player,url <span class="kw">in</span> team_player_urls.items():</span>
<span id="cb1-18"><a href="#cb1-18"></a>        <span class="bu">print</span>(<span class="st">"grabbing data for: "</span> <span class="op">+</span> player)</span>
<span id="cb1-19"><a href="#cb1-19"></a>        match_data <span class="op">=</span> players.get_match_data(url,world_cup_year)</span>
<span id="cb1-20"><a href="#cb1-20"></a>        <span class="co"># possibility of player not playing any games </span></span>
<span id="cb1-21"><a href="#cb1-21"></a>        <span class="cf">if</span> match_data <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb1-22"><a href="#cb1-22"></a>            <span class="cf">continue</span></span>
<span id="cb1-23"><a href="#cb1-23"></a>        min_played <span class="op">=</span> players.get_minutes_played(match_data)</span>
<span id="cb1-24"><a href="#cb1-24"></a>        <span class="co"># add player_name column so we can identify rows when we concatenate</span></span>
<span id="cb1-25"><a href="#cb1-25"></a>        min_played[<span class="st">'player_name'</span>] <span class="op">=</span> player</span>
<span id="cb1-26"><a href="#cb1-26"></a>        team_minutes_played.append(min_played)</span>
<span id="cb1-27"><a href="#cb1-27"></a></span>
<span id="cb1-28"><a href="#cb1-28"></a>    all_minutes_played<span class="op">=</span> pd.concat(team_minutes_played)</span>
<span id="cb1-29"><a href="#cb1-29"></a></span>
<span id="cb1-30"><a href="#cb1-30"></a>    </span>
<span id="cb1-31"><a href="#cb1-31"></a></span>
<span id="cb1-32"><a href="#cb1-32"></a>    world_cup_minutes <span class="op">=</span> all_minutes_played.loc[all_minutes_played[<span class="st">'Date'</span>].between(world_cup_start, world_cup_end)]</span>
<span id="cb1-33"><a href="#cb1-33"></a></span>
<span id="cb1-34"><a href="#cb1-34"></a>    <span class="cf">return</span> world_cup_minutes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We can now use this function to extract data for each Premier league team:</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># for some reason transfermarkt lists world cup on 2021 page</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>world_cup_year<span class="op">=</span> <span class="st">"2021"</span></span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co"># get 2022 premier league clubs</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>prem_clubs_22 <span class="op">=</span> leagues.get_prem_club_list(season<span class="op">=</span><span class="st">"2022"</span>)</span>
<span id="cb2-6"><a href="#cb2-6"></a></span>
<span id="cb2-7"><a href="#cb2-7"></a>prem_world_cup_minutes <span class="op">=</span> {}</span>
<span id="cb2-8"><a href="#cb2-8"></a></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="cf">for</span> club,url <span class="kw">in</span> prem_clubs_22.items():</span>
<span id="cb2-10"><a href="#cb2-10"></a>    team_minutes <span class="op">=</span> get_world_cup_minutes(url)</span>
<span id="cb2-11"><a href="#cb2-11"></a>    prem_world_cup_minutes[club] <span class="op">=</span> team_minutes</span>
<span id="cb2-12"><a href="#cb2-12"></a>    <span class="co"># add club name so we can identify rows by club when we concatenate rows</span></span>
<span id="cb2-13"><a href="#cb2-13"></a>    team_minutes[<span class="st">"club"</span>] <span class="op">=</span> club</span>
<span id="cb2-14"><a href="#cb2-14"></a></span>
<span id="cb2-15"><a href="#cb2-15"></a>prem_world_cup_minutes_df <span class="op">=</span> pd.concat(prem_world_cup_minutes.values())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Finally we have our complete dataset that we can play around with!</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a>prem_world_cup_minutes_df.sample(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Date</th>
      <th>Matchday</th>
      <th>Home team.1</th>
      <th>Away team.1</th>
      <th>Result</th>
      <th>min_played</th>
      <th>subbed_on</th>
      <th>subbed_off</th>
      <th>player_name</th>
      <th>club</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2022-11-21</td>
      <td>Group B</td>
      <td>England</td>
      <td>Iran</td>
      <td>6:2</td>
      <td>0</td>
      <td>Groin Surgery</td>
      <td>Groin Surgery</td>
      <td>Emile Smith Rowe</td>
      <td>Arsenal FC</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2022-12-06</td>
      <td>Round of 16</td>
      <td>Morocco</td>
      <td>Spain</td>
      <td>3:0 on pens</td>
      <td>0</td>
      <td>on the bench</td>
      <td>on the bench</td>
      <td>David Raya</td>
      <td>Brentford FC</td>
    </tr>
    <tr>
      <th>5</th>
      <td>2022-12-14</td>
      <td>Semi-Finals</td>
      <td>France</td>
      <td>Morocco</td>
      <td>2:0</td>
      <td>0</td>
      <td>Not in squad</td>
      <td>Not in squad</td>
      <td>Lucas Digne</td>
      <td>Aston Villa</td>
    </tr>
    <tr>
      <th>0</th>
      <td>2022-11-21</td>
      <td>Group B</td>
      <td>England</td>
      <td>Iran</td>
      <td>6:2</td>
      <td>0</td>
      <td>on the bench</td>
      <td>on the bench</td>
      <td>Aaron Ramsdale</td>
      <td>Arsenal FC</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2022-11-29</td>
      <td>Group B</td>
      <td>Wales</td>
      <td>England</td>
      <td>0:3</td>
      <td>77</td>
      <td>NaN</td>
      <td>77'</td>
      <td>Daniel James</td>
      <td>Fulham FC</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</section>
<section id="data-processing" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Data processing</h1>
<p>Now that the data is normalised, we can run some sense checks to ensure the data is what we expect.</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1"></a>prem_world_cup_minutes_df[<span class="st">'player_name'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>Lucas Digne            7
Mateo Kovacic          7
Raphaël Varane         7
N'Golo Kanté           7
Hakim Ziyech           7
                      ..
Thomas Partey          3
Tariq Lamptey          3
Wout Faes              3
Armel Bella-Kotchap    3
Philip Billing         3
Name: player_name, Length: 150, dtype: int64</code></pre>
</div>
</div>
<p>This passes the eye test: Digne (France) and Kovacic (Croatia) both played all games in the World Cup since they got to the final and third place playoff, and unfortunately for Billing (Denmark) and Bella-Kotchap (Germany), their teams were knocked out at the group stage after playing only 3 games.</p>
<section id="adding-country-name" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="adding-country-name"><span class="header-section-number">3.1</span> Adding country name</h2>
<p>This data doesn’t currently contain the name of the country, and although we can get this by scraping more webpages, it isn’t ideal since we have to make more requests which is slow and writing more code to scrape the responses won’t be fun or productive.</p>
<p>We do have the data for each game played by the player, so a hacky way to get the team name is to calculate the mode of the teams in the subset of data for that player. I.e. for Lucas Digne (France), here are all the games played by him:</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1"></a>prem_world_cup_minutes_df[prem_world_cup_minutes_df[<span class="st">'player_name'</span>] <span class="op">==</span><span class="st">"Lucas Digne"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Date</th>
      <th>Matchday</th>
      <th>Home team.1</th>
      <th>Away team.1</th>
      <th>Result</th>
      <th>min_played</th>
      <th>subbed_on</th>
      <th>subbed_off</th>
      <th>player_name</th>
      <th>club</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2022-11-22</td>
      <td>Group D</td>
      <td>France</td>
      <td>Australia</td>
      <td>4:1</td>
      <td>0</td>
      <td>Not in squad</td>
      <td>Not in squad</td>
      <td>Lucas Digne</td>
      <td>Aston Villa</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2022-11-26</td>
      <td>Group D</td>
      <td>France</td>
      <td>Denmark</td>
      <td>2:1</td>
      <td>0</td>
      <td>Not in squad</td>
      <td>Not in squad</td>
      <td>Lucas Digne</td>
      <td>Aston Villa</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2022-11-30</td>
      <td>Group D</td>
      <td>Tunisia</td>
      <td>France</td>
      <td>1:0</td>
      <td>0</td>
      <td>Not in squad</td>
      <td>Not in squad</td>
      <td>Lucas Digne</td>
      <td>Aston Villa</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2022-12-04</td>
      <td>Round of 16</td>
      <td>France</td>
      <td>Poland</td>
      <td>3:1</td>
      <td>0</td>
      <td>Not in squad</td>
      <td>Not in squad</td>
      <td>Lucas Digne</td>
      <td>Aston Villa</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2022-12-10</td>
      <td>Quarter-Finals</td>
      <td>England</td>
      <td>France</td>
      <td>1:2</td>
      <td>0</td>
      <td>Not in squad</td>
      <td>Not in squad</td>
      <td>Lucas Digne</td>
      <td>Aston Villa</td>
    </tr>
    <tr>
      <th>5</th>
      <td>2022-12-14</td>
      <td>Semi-Finals</td>
      <td>France</td>
      <td>Morocco</td>
      <td>2:0</td>
      <td>0</td>
      <td>Not in squad</td>
      <td>Not in squad</td>
      <td>Lucas Digne</td>
      <td>Aston Villa</td>
    </tr>
    <tr>
      <th>6</th>
      <td>2022-12-18</td>
      <td>Final</td>
      <td>Argentina</td>
      <td>France</td>
      <td>7:5 on pens</td>
      <td>0</td>
      <td>Not in squad</td>
      <td>Not in squad</td>
      <td>Lucas Digne</td>
      <td>Aston Villa</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>We can see that France show up the most in the <code>Home team.1</code> and <code>Away team.1</code> columns, so we can use this to calculate which team he plays for.</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1"></a>prem_world_cup_minutes_df[prem_world_cup_minutes_df[<span class="st">'player_name'</span>] <span class="op">==</span><span class="st">"Lucas Digne"</span>][[<span class="st">'Home team.1'</span>, <span class="st">'Away team.1'</span>]].values</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>array([['France', 'Australia'],
       ['France', 'Denmark'],
       ['Tunisia', 'France'],
       ['France', 'Poland'],
       ['England', 'France'],
       ['France', 'Morocco'],
       ['Argentina', 'France']], dtype=object)</code></pre>
</div>
</div>
<p>Since the team names are spread across two columns, we first convert this into a 2D <code>numpy.array</code></p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1"></a>teams <span class="op">=</span> prem_world_cup_minutes_df[</span>
<span id="cb9-2"><a href="#cb9-2"></a>    prem_world_cup_minutes_df[<span class="st">'player_name'</span>] <span class="op">==</span><span class="st">"Lucas Digne"</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>    ][</span>
<span id="cb9-4"><a href="#cb9-4"></a>        [<span class="st">'Home team.1'</span>, <span class="st">'Away team.1'</span>]</span>
<span id="cb9-5"><a href="#cb9-5"></a>        ].values.flatten()</span>
<span id="cb9-6"><a href="#cb9-6"></a>teams</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>array(['France', 'Australia', 'France', 'Denmark', 'Tunisia', 'France',
       'France', 'Poland', 'England', 'France', 'France', 'Morocco',
       'Argentina', 'France'], dtype=object)</code></pre>
</div>
</div>
<p>And then flatten it so its a 1D array (like a list) and we can calculate the mode</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1"></a>pd.DataFrame(teams).mode().iloc[<span class="dv">0</span>,<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>'France'</code></pre>
</div>
</div>
<p>We can applying this to the full dataset with <code>DataFrame.apply</code> and then merge it with the original dataset so we have an extra <code>country</code> column.</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1"></a>player_countries <span class="op">=</span> prem_world_cup_minutes_df.groupby(<span class="st">"player_name"</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> df: pd.DataFrame(df[[<span class="st">'Home team.1'</span>, <span class="st">'Away team.1'</span>]].values.flatten()).mode())</span>
<span id="cb13-2"><a href="#cb13-2"></a>player_countries <span class="op">=</span> player_countries.reset_index().drop(<span class="st">"level_1"</span>, axis<span class="op">=</span><span class="dv">1</span>).rename({<span class="dv">0</span>:<span class="st">'country'</span>}, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb13-3"><a href="#cb13-3"></a>prem_world_cup_minutes_df <span class="op">=</span> prem_world_cup_minutes_df.merge(player_countries, how<span class="op">=</span><span class="st">'left'</span>, left_on<span class="op">=</span><span class="st">"player_name"</span>, right_on<span class="op">=</span><span class="st">"player_name"</span>)</span>
<span id="cb13-4"><a href="#cb13-4"></a>prem_world_cup_minutes_df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Date</th>
      <th>Matchday</th>
      <th>Home team.1</th>
      <th>Away team.1</th>
      <th>Result</th>
      <th>min_played</th>
      <th>subbed_on</th>
      <th>subbed_off</th>
      <th>player_name</th>
      <th>club</th>
      <th>country</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2022-11-24</td>
      <td>Group G</td>
      <td>Switzerland</td>
      <td>Cameroon</td>
      <td>1:0</td>
      <td>90</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Manuel Akanji</td>
      <td>Manchester City</td>
      <td>Switzerland</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2022-11-28</td>
      <td>Group G</td>
      <td>Brazil</td>
      <td>Switzerland</td>
      <td>1:0</td>
      <td>90</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Manuel Akanji</td>
      <td>Manchester City</td>
      <td>Switzerland</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2022-12-02</td>
      <td>Group G</td>
      <td>Serbia</td>
      <td>Switzerland</td>
      <td>2:3</td>
      <td>90</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Manuel Akanji</td>
      <td>Manchester City</td>
      <td>Switzerland</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2022-12-06</td>
      <td>Round of 16</td>
      <td>Portugal</td>
      <td>Switzerland</td>
      <td>6:1</td>
      <td>90</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Manuel Akanji</td>
      <td>Manchester City</td>
      <td>Switzerland</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2022-11-24</td>
      <td>Group H</td>
      <td>Portugal</td>
      <td>Ghana</td>
      <td>3:2</td>
      <td>90</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>João Cancelo</td>
      <td>Manchester City</td>
      <td>Portugal</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</section>
</section>
<section id="visualisation" class="level1 page-columns page-full" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Visualisation</h1>
<p>The aim of this visualisation was to assess the impact on various premier league teams, so we can start by aggregating by club and just adding up all the minutes.</p>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1"></a>club_minutes <span class="op">=</span> prem_world_cup_minutes_df.groupby([<span class="st">'club'</span>]).<span class="bu">sum</span>(numeric_only<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb14-2"><a href="#cb14-2"></a>_ <span class="op">=</span> club_minutes.plot(kind<span class="op">=</span><span class="st">'barh'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-12-output-1.png" width="749" height="411"></p>
</div>
</div>
<p>This plot seems a bit bare, and it misses context around the distribution of the minutes amongst the squad. For example, Bournemouth seems to have comparable minutes played with Brentford, but Bournemouth were represented by just one player (Phillip Billing of Denmark) vs Brentford who had 4 different players at the World Cup. You could argue the impact to Brentford is greater since Bournemouth can just rest Billing for a game or two, whereas resting 5 players is a taller order for Brentford.</p>
<section id="grouping-by-country" class="level2 page-columns page-full" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="grouping-by-country"><span class="header-section-number">4.1</span> Grouping by country</h2>
<div class="cell page-columns page-full" data-execution_count="12">
<div class="cell-output cell-output-display column-page">
<p><img src="index_files/figure-html/cell-13-output-1.png" width="1058" height="535"></p>
</div>
</div>
<p>This seems to be committing the sin of way too much data in one plot, there just aren’t enough (significantly) different enough colours to differentiate between the countries, and even if we could - it’d be too much to take in for a visualisation.</p>
</section>
<section id="grouping-by-tournament-progression" class="level2 page-columns page-full" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="grouping-by-tournament-progression"><span class="header-section-number">4.2</span> Grouping by tournament progression</h2>
<p>A more meaningful and accessible visualisation is to group together contries that made it to the same stages of the tournament. The progression through the world cup rounds indicates how much rest the players have had and also provides reasons behind the number of minutes: progressing to later rounds is likely to be the cause behind a higher number of minutes played.</p>
<div class="cell page-columns page-full" data-execution_count="13">
<div class="cell-output cell-output-display column-page">
<p><img src="index_files/figure-html/cell-14-output-1.png" width="953" height="449"></p>
</div>
</div>
</section>
<section id="finishing-touches" class="level2 page-columns page-full" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="finishing-touches"><span class="header-section-number">4.3</span> Finishing touches</h2>
<p>Since we are exploring the impact of fatigue from the world cup, it would make sense to order the y axis (premier league teams) by league position since this is likely to be affected following the world cup.</p>
<div class="cell" data-execution_count="14">
<details>
<summary>Adding premier league standings</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1"></a><span class="im">from</span> fuzzywuzzy <span class="im">import</span> process</span>
<span id="cb15-2"><a href="#cb15-2"></a>prem_standings <span class="op">=</span> pd.read_html(<span class="st">"https://www.bbc.co.uk/sport/football/tables"</span>)[<span class="dv">0</span>]</span>
<span id="cb15-3"><a href="#cb15-3"></a>prem_standings <span class="op">=</span> prem_standings.iloc[:<span class="op">-</span><span class="dv">1</span>, [<span class="dv">0</span>,<span class="dv">2</span>]].rename({<span class="st">'Unnamed: 0'</span>:<span class="st">'prem_position'</span>}, axis<span class="op">=</span><span class="dv">1</span>).set_index(<span class="st">'Team'</span>)</span>
<span id="cb15-4"><a href="#cb15-4"></a></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="co"># taken from https://stackoverflow.com/a/56315491</span></span>
<span id="cb15-6"><a href="#cb15-6"></a><span class="kw">def</span> fuzzy_merge(df_1, df_2, key1, key2, threshold<span class="op">=</span><span class="dv">90</span>, limit<span class="op">=</span><span class="dv">2</span>):</span>
<span id="cb15-7"><a href="#cb15-7"></a>    <span class="co">"""</span></span>
<span id="cb15-8"><a href="#cb15-8"></a><span class="co">    :param df_1: the left table to join</span></span>
<span id="cb15-9"><a href="#cb15-9"></a><span class="co">    :param df_2: the right table to join</span></span>
<span id="cb15-10"><a href="#cb15-10"></a><span class="co">    :param key1: key column of the left table</span></span>
<span id="cb15-11"><a href="#cb15-11"></a><span class="co">    :param key2: key column of the right table</span></span>
<span id="cb15-12"><a href="#cb15-12"></a><span class="co">    :param threshold: how close the matches should be to return a match, based on Levenshtein distance</span></span>
<span id="cb15-13"><a href="#cb15-13"></a><span class="co">    :param limit: the amount of matches that will get returned, these are sorted high to low</span></span>
<span id="cb15-14"><a href="#cb15-14"></a><span class="co">    :return: dataframe with boths keys and matches</span></span>
<span id="cb15-15"><a href="#cb15-15"></a><span class="co">    """</span></span>
<span id="cb15-16"><a href="#cb15-16"></a>    s <span class="op">=</span> df_2[key2].tolist()</span>
<span id="cb15-17"><a href="#cb15-17"></a>    </span>
<span id="cb15-18"><a href="#cb15-18"></a>    m <span class="op">=</span> df_1[key1].<span class="bu">apply</span>(<span class="kw">lambda</span> x: process.extract(x, s, limit<span class="op">=</span>limit))    </span>
<span id="cb15-19"><a href="#cb15-19"></a>    df_1[<span class="st">'matches'</span>] <span class="op">=</span> m</span>
<span id="cb15-20"><a href="#cb15-20"></a>    </span>
<span id="cb15-21"><a href="#cb15-21"></a>    m2 <span class="op">=</span> df_1[<span class="st">'matches'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="st">', '</span>.join([i[<span class="dv">0</span>] <span class="cf">for</span> i <span class="kw">in</span> x <span class="cf">if</span> i[<span class="dv">1</span>] <span class="op">&gt;=</span> threshold]))</span>
<span id="cb15-22"><a href="#cb15-22"></a>    df_1[<span class="st">'matches'</span>] <span class="op">=</span> m2</span>
<span id="cb15-23"><a href="#cb15-23"></a>    </span>
<span id="cb15-24"><a href="#cb15-24"></a>    <span class="cf">return</span> df_1</span>
<span id="cb15-25"><a href="#cb15-25"></a>df <span class="op">=</span> df.reset_index()</span>
<span id="cb15-26"><a href="#cb15-26"></a>prem_standings <span class="op">=</span> prem_standings.reset_index()</span>
<span id="cb15-27"><a href="#cb15-27"></a>merged_standings <span class="op">=</span> fuzzy_merge(df, prem_standings, key1<span class="op">=</span><span class="st">'club'</span>, key2<span class="op">=</span><span class="st">'Team'</span>, threshold<span class="op">=</span><span class="dv">65</span>, limit<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb15-28"><a href="#cb15-28"></a>merged_standings.loc[merged_standings[<span class="st">'club'</span>]<span class="op">==</span><span class="st">"Manchester United"</span>, <span class="st">'matches'</span>] <span class="op">=</span> <span class="st">'Man Utd'</span></span>
<span id="cb15-29"><a href="#cb15-29"></a>merged_standings <span class="op">=</span> merged_standings.merge(prem_standings, how<span class="op">=</span><span class="st">'left'</span>, left_on<span class="op">=</span><span class="st">'matches'</span>, right_on<span class="op">=</span><span class="st">'Team'</span>).drop([<span class="st">'matches'</span>, <span class="st">'Team'</span>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb15-30"><a href="#cb15-30"></a>merged_standings[<span class="st">'prem_position'</span>] <span class="op">=</span> pd.to_numeric(merged_standings[<span class="st">'prem_position'</span>])</span>
<span id="cb15-31"><a href="#cb15-31"></a>merged_standings.sort_values(<span class="st">'prem_position'</span>, inplace<span class="op">=</span><span class="va">True</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb15-32"><a href="#cb15-32"></a></span>
<span id="cb15-33"><a href="#cb15-33"></a>df <span class="op">=</span> merged_standings.drop(<span class="st">"prem_position"</span>, axis<span class="op">=</span><span class="dv">1</span>).set_index(<span class="st">"club"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We can change the colour scheme so it’s more accessible (see <a href="colorbrew.org">colorbrew.org</a>) and somewhat matches the world cup theme, change the fonts, add some spacing and we end up with our final plot:</p>
<div class="cell page-columns page-full" data-execution_count="15">
<div class="cell-output cell-output-display column-screen-inset">
<p><img src="index_files/figure-html/cell-16-output-1.png" width="1472" height="701"></p>
</div>
</div>



</section>
</section>

<div class="quarto-listing quarto-listing-container-default" id="listing-listing">
<div class="list quarto-listing-default">

</div>
<div class="listing-no-matching d-none">
No matching items
</div>
</div><p>Any thoughts, comments or ideas? Please let me know <a href="mailto:ismailmo4@gmail.com">here</a>!</p></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/ismailmo1">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://linkedin.com/in/ismailmo-chem">
      <i class="bi bi-linkedin" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>