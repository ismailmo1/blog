[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "My Blog",
    "section": "",
    "text": "0 min\n\n\n\nnews\n\n\n\n\nOct 29, 2022\n\n\n\n\n\n\n\n\n\n\n \n\n\n\n\n0 min\n\n\n\nsql\n\n\npython\n\n\npytest\n\n\n\n\nJan 11, 2022\n\n\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/welcome/index.html",
    "href": "posts/welcome/index.html",
    "title": "Welcome To My Blog",
    "section": "",
    "text": "Since this post doesn’t specify an explicit image, the first image in the post will be used in the listing page of posts."
  },
  {
    "objectID": "posts/pytest-sql/index.html",
    "href": "posts/pytest-sql/index.html",
    "title": "SQL and Pytest",
    "section": "",
    "text": "Regardless of the merits of using ORMs or not, this post assumes you are already in the situation where you have a complex SQL query sitting in your python application somewhere, and you want to test it just like you test your other functions. ___\nLet’s begin by setting the scene and motivating the examples in this post.\nWe’re currently working on a flask app and we’ve been asked to integrate a new data source to an existing view in the app. We take a look at the endpoint that renders the template for the view and this is what we’re greeted with:\n\nfrom flask import Flask\nimport sqlite3\nfrom flask import g\n\nDATABASE = 'database.db'\n\n# for a real app we'd use the factory pattern\napp = Flask(__name__)\n\n# quickstart from https://flask.palletsprojects.com/en/2.2.x/patterns/sqlite3/\ndef get_db()-> sqlite3.Connection:\n    db = getattr(g, '_database', None)\n    if db is None:\n        db = g._database = sqlite3.connect(DATABASE)\n    return db\n\n@app.teardown_appcontext\ndef close_connection(exception):\n    db = getattr(g, '_database', None)\n    if db is not None:\n        db.close()\n\n@app.get('/')\ndef home():\n    query = \"SELECT * FROM table1\"\n    cur = get_db().execute(query)\n    res = cur.fetchall()\n    return res\n\napp.run()\n\n * Serving Flask app '__main__'\n * Debug mode: off\n\n\nWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.\n * Running on http://127.0.0.1:5000\nPress CTRL+C to quit\n127.0.0.1 - - [01/Nov/2022 21:19:59] \"GET / HTTP/1.1\" 200 -"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "You can reach out to me through any of the links below:"
  }
]